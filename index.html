<!DOCTYPE html><html lang="es"><head>  <meta charset="UTF-8" />  <meta name="viewport" content="width=device-width, initial-scale=1" />  <title>BestDeal Pal</title>  <style>    body {      font-family: Arial, sans-serif;      margin: 0; background: #f9f9f9;    }    header {      background-color: #00b894;      color: white;      text-align: center;      padding: 1em 0;    }    header img {      height: 60px;      display: block;      margin: 0 auto 10px;    }    .filters {      background: #f1f1f1;      padding: 1em;      display: flex;      gap: 1em;      flex-wrap: wrap;      justify-content: center;    }    select {      padding: 0.5em;      font-size: 1em;    }    #productList {      display: grid;      grid-template-columns: repeat(auto-fill,minmax(250px,1fr));      gap: 1em;      padding: 1em;      max-width: 1200px;      margin: 0 auto 100px;    }    .product {      background: white;      border-radius: 8px;      padding: 1em;      box-shadow: 0 2px 6px rgba(0,0,0,0.12);      display: flex;      flex-direction: column;      align-items: center;    }    .product img {      max-width: 100%;      max-height: 150px;      object-fit: contain;      margin-bottom: 0.5em;    }    .product h3 {      margin: 0.3em 0;      text-align: center;      font-size: 1.1em;    }    .product p {      margin: 0.2em 0;      font-size: 0.9em;      color: #333;    }    .product a {      margin-top: auto;      display: inline-block;      padding: 0.5em 1em;      background: #00b894;      color: white;      text-decoration: none;      border-radius: 4px;      font-weight: bold;      transition: background-color 0.3s ease;    }    .product a:hover {      background: #019875;    }    .btn-add-cart {      margin-top: 0.7em;      padding: 0.5em 1em;      background: #0984e3;      color: white;      border: none;      border-radius: 4px;      cursor: pointer;      font-weight: bold;      width: 100%;      transition: background-color 0.3s ease;    }    .btn-add-cart:hover {      background: #065fa8;    }    /* Carrito lateral */    #cart {      position: fixed;      right: 0;      top: 60px;      width: 280px;      max-height: calc(100vh - 60px);      background: white;      border-left: 2px solid #00b894;      box-shadow: -2px 0 8px rgba(0,0,0,0.1);      overflow-y: auto;      padding: 1em;      font-size: 0.9em;      z-index: 1000;    }    #cart h2 {      margin-top: 0;      font-size: 1.3em;      color: #00b894;      text-align: center;    }    #cartList {      list-style: none;      padding: 0;      margin: 0 0 1em 0;    }    #cartList li {      margin-bottom: 0.8em;      border-bottom: 1px solid #ddd;      padding-bottom: 0.5em;    }    #cartList li span {      display: block;      font-weight: bold;      margin-bottom: 0.2em;    }    #cartList li a {      color: #0984e3;      text-decoration: none;      font-size: 0.9em;    }    #cartList li a:hover {      text-decoration: underline;    }    .btn-remove {      background: #d63031;      border: none;      color: white;      padding: 0.3em 0.6em;      border-radius: 4px;      font-size: 0.8em;      cursor: pointer;      float: right;      margin-top: -20px;    }    .btn-remove:hover {      background: #b32420;    }    #cartButtons {      display: flex;      justify-content: space-between;      gap: 0.5em;    }    #btnClearCart, #btnCopyLinks {      flex: 1;      padding: 0.5em;      background: #00b894;      color: white;      border: none;      border-radius: 4px;      cursor: pointer;      font-weight: bold;      transition: background-color 0.3s ease;    }    #btnClearCart:hover, #btnCopyLinks:hover {      background: #019875;    }    /* Footer */    footer {      text-align: center;      font-size: 0.8em;      color: #777;      padding: 1em 0;      margin-top: 2em;      border-top: 1px solid #ddd;    }  </style></head><body>  <header>    <img src="logo_bestdeal.png" alt="BestDeal Pal Logo" />    <h1>BestDeal Pal</h1>    <p>Encuentra el precio más bajo</p>  </header>
  <div class="filters">    <label>      Categoría:      <select id="categoryFilter">        <option value="Todos">Todos</option>      </select>    </label>    <label>      Tienda:      <select id="storeFilter">        <option value="Todos">Todos</option>      </select>    </label>  </div>
  <div id="productList">    <p>Cargando productos...</p>  </div>
  <div id="cart">    <h2>Carrito </h2>    <ul id="cartList">      <li>No hay productos.</li>    </ul>    <div id="cartButtons">      <button id="btnClearCart">Vaciar carrito</button>      <button id="btnCopyLinks">Copiar enlaces</button>    </div>  </div>
  <footer>    &copy; 2025 BestDeal Pal. Todos los derechos reservados.  </footer>
  <script>    const API_URL = "https://script.google.com/macros/s/AKfycbxmw7Efnvjm9B6roZ2sNdelhGP_XBUCnYiahwXSS8S2Zhjmvxd77POi5Cw0WU87qhTTcg/exec";
    let products = [];    let cart = [];
    const productListEl = document.getElementById("productList");    const categoryFilterEl = document.getElementById("categoryFilter");    const storeFilterEl = document.getElementById("storeFilter");    const cartListEl = document.getElementById("cartList");    const btnClearCart = document.getElementById("btnClearCart");    const btnCopyLinks = document.getElementById("btnCopyLinks");
    async function fetchProducts() {      try {        const res = await fetch(API_URL);        if(!res.ok) throw new Error(`Error HTTP: ${res.status}`);        const data = await res.json();        console.log("Datos recibidos:", data);        products = data;        if(!products || products.length === 0) {          productListEl.innerHTML = "<p>No hay productos para mostrar.</p>";          return;        }        populateFilters();        renderProducts();        renderCart();      } catch (error) {        productListEl.innerHTML = `<p>Error al cargar productos: ${error.message}</p>`;        console.error(error);      }    }
    function populateFilters() {      // Normalizamos todo a minúsculas para que no haya conflicto      const categoriesSet = new Set(products.map(p => p.categoria.toLowerCase()));      const storesSet = new Set(products.map(p => p.tienda.toLowerCase()));
      // Limpia antes      categoryFilterEl.innerHTML = '<option value="Todos">Todos</option>';      storeFilterEl.innerHTML = '<option value="Todos">Todos</option>';
      // Agrega mayúsculas respetando originales      Array.from(categoriesSet).sort().forEach(catLower => {        // Buscamos un original para mostrar capitalizado        const original = products.find(p => p.categoria.toLowerCase() === catLower).categoria;        const opt = document.createElement("option");        opt.value = original;        opt.textContent = original;        categoryFilterEl.appendChild(opt);      });      Array.from(storesSet).sort().forEach(storeLower => {        const original = products.find(p => p.tienda.toLowerCase() === storeLower).tienda;        const opt = document.createElement("option");        opt.value = original;        opt.textContent = original;        storeFilterEl.appendChild(opt);      });
      categoryFilterEl.onchange = renderProducts;      storeFilterEl.onchange = renderProducts;    }
    function renderProducts() {      const catFilter = categoryFilterEl.value.toLowerCase();      const storeFilter = storeFilterEl.value.toLowerCase();
      let filtered = products;      if(catFilter !== "todos") {        filtered = filtered.filter(p => p.categoria.toLowerCase() === catFilter);      }      if(storeFilter !== "todos") {        filtered = filtered.filter(p => p.tienda.toLowerCase() === storeFilter);      }
      if(filtered.length === 0) {        productListEl.innerHTML = "<p>No hay productos para mostrar.</p>";        return;      }
      productListEl.innerHTML = "";      filtered.forEach(p => {        const div = document.createElement("div");        div.className = "product";        div.innerHTML = `          <img src="${p.imagen}" alt="${p.nombre}" />          <h3>${p.nombre}</h3>          <p><strong>Precio:</strong> ${p.precio}</p>          <p><strong>Tienda:</strong> ${p.tienda}</p>          <a href="${p.enlace}" target="_blank" rel="noopener">Ver oferta</a>          <button class="btn-add-cart" data-name="${p.nombre}" data-link="${p.enlace}">Añadir al carrito</button>        `;        productListEl.appendChild(div);      });
      document.querySelectorAll(".btn-add-cart").forEach(btn => {        btn.onclick = () => {          const name = btn.getAttribute("data-name");          const link = btn.getAttribute("data-link");          addToCart({nombre: name, enlace: link});        };      });    }
    function addToCart(product) {      if(cart.find(item => item.nombre === product.nombre)) {        alert("Este producto ya está en el carrito.");        return;      }      cart.push(product);      renderCart();    }
    function renderCart() {      if(cart.length === 0) {        cartListEl.innerHTML = "<li>No hay productos.</li>";        return;      }      cartListEl.innerHTML = "";      cart.forEach((item,i) => {        const li = document.createElement("li");        li.innerHTML = `          <span>${item.nombre}</span>          <a href="${item.enlace}" target="_blank" rel="noopener">Comprar</a>          <button class="btn-remove" data-index="${i}">X</button>        `;        cartListEl.appendChild(li);      });      document.querySelectorAll(".btn-remove").forEach(btn => {        btn.onclick = () => {          const i = parseInt(btn.getAttribute("data-index"));          cart.splice(i,1);          renderCart();        };      });    }
    btnClearCart.onclick = () => {      if(confirm("¿Quieres vaciar el carrito?")) {        cart = [];        renderCart();      }    };
    btnCopyLinks.onclick = () => {      if(cart.length === 0) {        alert("El carrito está vacío.");        return;      }      const links = cart.map(p => `${p.nombre}: ${p.enlace}`).join("\n");      navigator.clipboard.writeText(links).then(() => {        alert("Enlaces copiados al portapapeles.");      }).catch(() => {        alert("No se pudo copiar. Intenta manualmente.");      });    };
    fetchProducts();  </script></body></html>